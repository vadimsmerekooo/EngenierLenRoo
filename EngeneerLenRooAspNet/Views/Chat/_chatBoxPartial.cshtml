@using System.Globalization;
@model ChatViewModel

<div class="input-group shadow-sm p-1">
    <div class="col">
        <img src="~/img/resource/user-icon.png" alt="user" width="50" class="rounded-circle">
        @Model.UserDirect.GetShortFio() Каб: @Model.UserDirect.Cabinet.Name
    </div>
    <div class="col float-right">
        <i class="bi bi-search text-primary btn btn-outline-primary"></i>
    </div>
</div>
<div id="chatroom@(Model.ChatActive.Id)" class="px-4 py-5 chat-box bg-light chatroombox chatroomboxActive">

    @if (Model.ChatActive.Messages.Count == 0)
    {
        <div id="chatempty" class="card text-center">
            <div class="card-body">
                Диалог пуст. Напишите первое сообщение.
            </div>
        </div>
    }
    <partial name="_loadMessage" model="Model"/>

</div>

<div id="inputForm" class="input-group shadow-lg">
    <input id="messageinput" type="text" placeholder="Введите сообщение..." aria-describedby="button-addon2" class="form-control rounded-0 border-0 py-4 bg-light" onkeydown="sendMessageInput(`@Model.ChatActive.Id`,'@Model.User.Id');" onclick="Read('@Model.User.Id', `@Model.ChatActive.Id`);">
    <div class="input-group-append">
        <button id="sendButton" type="button" onclick="Send(`@Model.ChatActive.Id`, `@Model.User.Id`, `@Model.User.Fio`,);" class="btn btn-link bg-light"> <i class="bi bi-send"></i></button>
    </div>
</div>
<script>
    scrollToLowerChat();
    Read('@Model.User.Id', `@Model.ChatActive.Id`);
</script>